Changelog
=========


(unreleased)
------------

Fix
~~~
- Prevent cmd exiting after a successful connection (#107) [hyx0329]

  This commit fix #103 which causes the command line to exit after successfully
  opening a connection.
- Running scripts in Windows (#94) [Nicola N]

  Trying to run a script when inside an Anaconda/Miniconda virtual environment on windows10, the script would refuse to run.
  This tweak made it behave.
  I'm not sure if there are other consequences to this inclusion though: it might break under some other virtual environment, or non-virtual environment.
- Fix window drive path match (#77) [Juwan]

  allow open in C: to execfile .py in D: .
- Update prompt path after return from REPL (#88) [Thomas Friebel]

  * fix: Update prompt path after return from REPL

  When returning from REPL the file explorer is reinitialized since
  filesystem contents on the board may have changed. This also means that
  the current directory has been reset to /. Update prompt path to display
  the new path.

  * Restore current path after REPL

  Without this change, the device will be in the root directory after
  REPL. Store the current path before going into REPL and try to cd back
  into that path after.
- Remove second argument from on_error and on_message in conwebsock.py
  to make ws connections work again (#87) [xnorbt]
- Clean up readme (#84) [Matt Nicholas]
- Fix posix-style paths from Windows (#72) [zouden]
- Fix win10 console out garbled code when used
  up/down/left/right/tab.... (#67) [Juwan]
- Add small sleep to allow for board reset time (#64) [Anthony Elder]
- Provide mpfshell entrypoint instead of mpfshell script. (#63) [Stefan
  Lehmann]

  * Provide mpfshell entrypoint instead of mpfshell script.

  * Fix conflict.

  * Remove script

Other
~~~~~
- Feat: Autodetect port (#109) [karl]

  resolves https://github.com/wendlers/mpfshell/issues/82
- Release v0.9.3. [Stavros Korokithakis]
- Fix #97 (#101) [2e0byo]

  * typo

  * Revert "fix: Remove second argument from on_error and on_message in conwebsock.py to make ws connections work again (#87)"

  This reverts commit 378d24d2b85d0dca856aec3600d1dc176a6738b0.

  * use uos

  * os is not imported yet!
- Upgrade and run pre-commit. [Stavros Korokithakis]
- Bump version. [Stavros Korokithakis]
- Reformat the code. [Stavros Korokithakis]
- Run pre-commit. [Stavros Korokithakis]
- Feat: Exit with return code 1 if open fails (#93) [Thomas Friebel]
- Fixed crash of "exec code_with_mistakes" (#92) [spinab]
- Performance improvement: Will not call sleep() at the last cycle.
  (#89) [Hans Maerki, Hans Märki]

  * Performance improvement: Will not call sleep() at the last cycle.

  * Update pyboard.py
- 0.9.1. [semantic-release]

  Automatically generated by python-semantic-release
- Upgrade pyserial. [Stavros Korokithakis]
- Fall back to os if uos does not exist. [Stavros Korokithakis]
- 0.9.0. [semantic-release]

  Automatically generated by python-semantic-release
- Revert version in preparation for release. [Stavros Korokithakis]
- Fix semantic-release config. [Stavros Korokithakis]
- Add semantic-release config. [Stavros Korokithakis]
- Add PyPI badge. [Stavros Korokithakis]
- Update Code Shelter badge to the right URL. [Stavros Korokithakis]
- Update Code Shelter badge. [Stavros Korokithakis]
- Massively improve caching for all commands. [Stavros Korokithakis]
- Add feature to README. [Stavros Korokithakis]
- Bump the version in preparation for a release. [Stavros Korokithakis]
- Pass arguments the right way when running mpy_cross with a
  destination. [Stavros Korokithakis]
- Update README.md. [Stavros Korokithakis]
- Clear the file cache when returning from the REPL (fixes #36) [Stavros
  Korokithakis]
- Clarify authentication details. [Stavros Korokithakis]
- Always close open file descriptors (fixes #49) [Stavros Korokithakis]
- Don't wait so long to connect (fixes #47) [Stavros Korokithakis]
- Add the "putc" command. [Stavros Korokithakis]
- Remove trailing whitespace. [Stavros Korokithakis]
- Update README.md (#52) [Yi Liu]
- Add pre-commit checks and fix their errors. [Stavros Korokithakis]
- Use "uos" instead of "os" for the module name. [Stavros Korokithakis]
- Merge pull request #56 from torntrousers/fix-for-circuitpython.
  [Stavros Korokithakis]

  Import binascii for CircuitPython
- Import binascii for CircuitPython. [Anthony Elder]
- Merge pull request #41 from tori3852/patch-1. [Stefan Wendler]

  Fix spelling note recursive->not recursive
- Fix spelling note recursive->not recursive. [Tomas R]


0.8.1 (2017-08-07)
------------------
- Preparing for PyPi. [Stefan Wendler]
- Added meta information. [Stefan Wendler]
- Updated venv section. [Stefan Wendler]
- Set version to 0.8.1. [Stefan Wendler]
- Merge pull request #39 from bartfeenstra/requirements. [Stefan
  Wendler]

  Add a Pip requirements file.
- Simplify the installation instructions. [Bart Feenstra]
- Update the Pip requirements to reflect those in the documentation.
  [Bart Feenstra]
- Add a Pip requirements file. [Bart Feenstra]
- Merge pull request #35 from fstengel/master. [Stefan Wendler]

  Add command line arguments
- Add command line arguments. [Frank STENGEL]

  Add two new arguments:
  * One positionnal: board
  * -o --open BOARD

  with the same effect: directly opening board.
- Merge pull request #38 from bartfeenstra/readme-typo. [Stefan Wendler]

  Fixed a typo in the README.
- Fixed a typo in the README. [Bart Feenstra]
- Fix for newer WiPy fw versions to make ls work again. [Stefan Wendler]
- Fixed bug for directory removal with newer MP versions fixed bug in
  caching for newly created directories. [Stefan Wendler]
- Corrected setup.py. [Stefan Wendler]
- Corrected setup.py. [Stefan Wendler]
- Merge branch 'master' into master. [Stefan Wendler]
- Small changes on merge. [Stefan Wendler]
- Merge branch 'master' of https://github.com/mhoffma/mpfshell. [Stefan
  Wendler]
- Ask platform where we are in FS don't assume / [marc hoffman]
- New version of esp2866 use vfat mounted at /flash not / [marc hoffman]
- Alows simple telnet no user,password. [marc hoffman]
- Merge branch 'couven92-colorama-fix-wendlers' [Stefan Wendler]
- Raw input deisabled for Windows. [Stefan Wendler]
- Colorama initialised first. [Fredrik Høisæther Rasch]

  Command-Prompt REPL initialised with color-supported stdout wrapper

  Prevent Command-Prompt REPL from using the raw_input as it does not use the specified stdout to display prompt text.
- Ask platform where we are in FS don't assume / [marc hoffman]
- Start out in directory /flash rather than in "/" to be more user-
  friendly on >=micropython-1.8.7. [Anton Kindestam]

  Warning: probably breaks compatibility, or at least makes the user
  experience uncomfortable, when used with older versions of micropython!
- Also handle ENODEV and EINVAL in the same way we handle ENOENT. [Anton
  Kindestam]

  In micropython-1.8.7 files on flash lie in /flash/ and / contains
  different mounts. If you try to create files, and other operations here
  you will get ENODEV. Also you might bump into EINVAL if you try to read
  a directory like a text file.
- Fix bug which could result in double '//' being sent to mpy side
  os.listdir call. [Anton Kindestam]
- Replace unsafe eval call with ast.literal_eval. [Anton Kindestam]

  An unsafe eval call was used to read a list-structure returned from the
  MicroPython client. This means that the client is able to execute
  arbitrary code on the host (connecting/PC side). Using ast.literal_eval
  instead should be safe.
- Merge pull request #16 from GHPS/master. [Stefan Wendler]

  Fixed crash of exec command in Python 3.5
- Fixed crash of exec command in Python 3.5. [GHPS]

  In Python 3.5 the exec function (e.g. exec print(1+2)) fails with "a bytes-like object is required, not 'str'" and crashes Mpfshell. The crash is caused by data_consumer - the type of "data".
- Posibility to hard-reset device when connected through serial-line
  (using comandline switch --reset). [Stefan Wendler]
- Posibility to hard-reset device when connected through serial-line
  (using comandline switch --reset). [Stefan Wendler]
- Posibility to hard-reset device when connected through serial-line
  (using comandline switch --reset). [Stefan Wendler]
- Added logging of serial messages for level DEBUG. [Stefan Wendler]
- Added chapter about running in a virtual environment. [Stefan Wendler]
- Removed known issue for REPL (since it seams to be gone). [Stefan
  Wendler]
- Don't reset (Ctrl-D) board when connecting through serial line. When
  using "cat" with a binary file, print simple hexdump. Command "mpyc"
  to bytecompile (local) python files. [Stefan Wendler]
- Allow quoted strings to support file/directory names with whitespaces
  (Fixes #13). Fixed behavior of "cat" to not hang on binary files
  (Fixes #12). [Stefan Wendler]
- Enabled caching by default. [Stefan Wendler]
- Fixed caching issues. Caching variant now passes test-suit. [Stefan
  Wendler]
- Minor changes. [Stefan Wendler]
- Added basic logging (enable with command-line-args '--logfile <file>',
  set level with '--loglevel <level>'. Fixes #10. [Stefan Wendler]
- Minor cleanups. [Stefan Wendler]
- Made websocket based read blocking to avoid high CPU usage on REPL.
  Fixes #9. [Stefan Wendler]
- If mput/mget receives a wron regular expression, re throws an
  exception. This exception is now caught and a error message is given
  (instead of terminating the whole shell). Fixes #8. [Stefan Wendler]
- Added note about old PySerial versions. [Stefan Wendler]
- Merge branch 'master' of github.com:wendlers/mpfshell. [Stefan
  Wendler]
- Reworked error reporting and error handling (added retry). Added more
  tests. [Stefan Wendler]
- Refuse to start REPL on PySerial < 2.7. [Stefan Wendler]
- Cleaned up header comments, started adding of retry function. [Stefan
  Wendler]
- Added more usage notes. [Stefan Wendler]
- Basic testing (only runs against EPS8266 yet). [Stefan Wendler]
- Started pytest based testcases. [Stefan Wendler]
- Fixed bug in caching (duplicate entries after put). [Stefan Wendler]
- On Windows to exit REPL CTR+Q is used. [Stefan Wendler]
- Fix to make script support work on python 2 and 3. [Stefan Wendler]
- Support Windows serial port namings (COMx) which fixes #6. Also
  implemented a work-around which made Miniterm on Windows bomb-out when
  recreating an instance, this fixes #5. [Stefan Wendler]
- Added basic caching for file and directory names. This minimizes
  communications (especially for tab-completion), and speeds up things a
  lot. Caching could always beeing disabled by the flag "--nocache" on
  the commandline. [Stefan Wendler]
- Now, PySerial starting at version >= 2.7 is OK. [Stefan Wendler]
- Wrapper to handle PySerial 2.7 and PySerial 3.0 differences for
  Miniterm. Fixes #2. [Stefan Wendler]
- Added Python 3 support (tool now supports Python >= 2.7 AND Python >=
  3.4). [Stefan Wendler]
- PWD now gives proper error message when not connected. Fixes #4.
  [Stefan Wendler]
- The shell script now explicitely uses python2 as a command. [Stefan
  Wendler]
- Check version of PySerial, only allow REPL for version 3.x. [Stefan
  Wendler]
- Merge branch 'master' of github.com:wendlers/mpfshell. [Stefan
  Wendler]
- Merge pull request #1 from sebastienkrut/patch-1. [Stefan Wendler]

  Update README.md
- Update README.md. [Sebastien KRUT]
- Color is now optional (use -o flag). [Stefan Wendler]
- Added note about command history. [Stefan Wendler]
- Added note about tab-completion. [Stefan Wendler]
- Updated screenshot. [Stefan Wendler]
- Added basic support for connecting to ESP via websockets. [Stefan
  Wendler]
- Added note about integrated REPL. [Stefan Wendler]
- Added not about scriptability. [Stefan Wendler]
- Added screenshot. [Stefan Wendler]
- Added list of main featues. [Stefan Wendler]
- Refactored the why connections are handled to allow different kind of
  connections. Thus, it is now possible to connect to the WiPi also via
  telnet. [Stefan Wendler]
- Fixed typo. [Stefan Wendler]
- Removed shortcut to "mpfmount". [Stefan Wendler]
- All files are now up-/downloaded in binary. Thus, binary file transfer
  is now possible, and thus, one could upload pre-compiled MP files.
  [Stefan Wendler]
- Removed the FUSE part, since I did not use it, and thus did not
  maintain it. [Stefan Wendler]
- Removed the STA config stuff again since it is hard to handle the
  (debug) responses right now. [Stefan Wendler]
- Added first version of WiFi management command to configure STA.
  [Stefan Wendler]
- Updated setup instructions. [Stefan Wendler]
- Updated README. [Stefan Wendler]
- Updated README. [Stefan Wendler]
- Now using PySerial 3.0. [Stefan Wendler]
- Fixed typo. [Stefan Wendler]
- Added more TAB-completion, added commands "mget", "mput", "mrm" to
  operate on multiple files. [Stefan Wendler]
- Added basic tab-completion for cd, get, put, rm, cat and lcd. Added
  different coloring for directories and files on "ls". [Stefan Wendler]
- Added basic support for directory operations on remote. [Stefan
  Wendler]
- Added setup.py, updated documentation. [Stefan Wendler]
- Added ability to script from commandline or file. Added color with
  colorama. [Stefan Wendler]
- Added terminal to REPL. [Stefan Wendler]
- Added cat and exec command. [Stefan Wendler]
- Layout. [Stefan Wendler]
- Changed title. [Stefan Wendler]
- Fixed typos. [Stefan Wendler]
- Merge remote-tracking branch 'origin/master' [Stefan Wendler]

  # Conflicts:
  #	README.md
- Update README.md. [Stefan Wendler]
- Reworked the FUSE fs for MP. [Stefan Wendler]
- Added docs for FUSE mount usage. [Stefan Wendler]
- Added too to mount micropython with FUSE. [Stefan Wendler]
- Factored the file-operations into separate class for better
  reusability. [Stefan Wendler]
- Added note on REPL. [Stefan Wendler]
- Added remark about version. [Stefan Wendler]
- Fixed typo. [Stefan Wendler]
- Initial commit. [Stefan Wendler]


